var vote_num=0;var size_loaded=0;var email_loaded=0;var pb_loaded=0;var pg_key=0;function multi_delete(formname){var formid=document.getElementById(formname);isDelete=formid.doaction.options[formid.doaction.selectedIndex].value;if(isDelete=='del'){formCheck=confirm(lang_suredelete);if(formCheck==true){return true;}else{return false;}}}function getYScroll(){var scrollY=0;if(document.documentElement&&document.documentElement.scrollTop){scrollY=document.documentElement.scrollTop;}else if(document.body&&document.body.scrollTop){scrollY=document.body.scrollTop;}else if(window.pageYOffset){scrollY=window.pageYOffset;}else if(window.scrollY){scrollY=window.scrollY;}return scrollY;};function triggerProgressBar(){var pb_main=document.getElementById('uploadProgress');var pb_drag=document.getElementById('uploadProgressHandle');var pb_content=document.getElementById('uploadProgressContainer');if(!pb_loaded){var my_width=0;var my_height=0;if(typeof(window.innerWidth)=='number'){my_width=window.innerWidth;my_height=window.innerHeight;}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){my_width=document.documentElement.clientWidth;my_height=document.documentElement.clientHeight;}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){my_width=document.body.clientWidth;my_height=document.body.clientHeight;}var divheight=parseInt(pb_main.style.Height);var divwidth=parseInt(pb_main.style.Width);divheight=divheight?divheight:300;divwidth=divwidth?divwidth:400;pb_main.style.left=my_width/2-(divwidth/2)+'px';pb_main.style.top=parseInt(getYScroll()+my_height)/2-(divheight/2)+'px';Drag.cookiename='ipb-pb-div';Drag.init(pb_drag,pb_main);pb_loaded=1;}pb_main.style.position='relative';pb_main.style.display='block';pb_main.style.zIndex=99;if(is_ie){var html=pb_content.innerHTML;html="<iframe id='pb-shim' src='"+ipb_var_image_url+"/iframe.html' class='iframshim' scrolling='no' frameborder='0' style='position:absolute; top:0px; left:0px; right:0px; display: none;'></iframe>"+html;pb_content.innerHTML=html;}if(is_ie){var drag_html=pb_drag.innerHTML;var main_drag_html="<iframe id='pb-shim-two' src='"+ipb_var_image_url+"/iframe.html' class='iframshim' scrolling='no' frameborder='0' style='position:absolute; top:0px; left:0px; right:0px; display: none;'></iframe>"+drag_html;pb_drag.innerHTML=main_drag_html;}if(is_ie){pb_shim=document.getElementById('pb-shim');pb_shim.style.width=pb_content.offsetWidth;pb_shim.style.height=pb_content.offsetHeight-5;pb_shim.style.zIndex=pb_content.style.zIndex-1;pb_shim.style.top=pb_content.style.top;pb_shim.style.left=pb_content.style.left;pb_shim.style.display="block";pb_shim_d=document.getElementById('pb-shim-two');pb_shim_d.style.width=pb_drag.offsetWidth;pb_shim_d.style.height=pb_drag.offsetHeight;pb_shim_d.style.zIndex=pb_drag.style.zIndex-1;pb_shim_d.style.top=pb_drag.style.top;pb_shim_d.style.left=pb_drag.style.left;pb_shim_d.style.display="block";}setTimeout("pbBarTimer()",500);return false;};function pbBarTimer(){if(!pg_key){pg_key=document.getElementById('progress_key').value;}do_request_function=function(){if(!xmlobj.readystate_ready_and_ok()){return;}var returned=xmlobj.xmlhandler.responseText;var bits=returned.split("||");var pct=bits[4];document.getElementById('uploadPCT').innerHTML=pct+"%";document.getElementById('uploadSOFAR').innerHTML=bits[1];document.getElementById('uploadTOTAL').innerHTML=bits[0];document.getElementById('uploadSPEED').innerHTML=bits[2];if(parseInt(bits[3])>0){document.getElementById('uploadTTLdiv').style.display='';document.getElementById('uploadTTL').innerHTML=bits[3];}document.getElementById('progressBar').style.width=''+pct+'%';setTimeout("pbBarTimer()",500);};xmlobj=new ajax_request();xmlobj.onreadystatechange(do_request_function);xmlobj.process(ipb_var_base_url+'autocom=downloads&req=ajax&code=progressBar&progress_key='+pg_key,'GET');return false;};function show_estimated_times(){var size_main=document.getElementById('dlestimates');var size_drag=document.getElementById('size-drag');var size_content=document.getElementById('size-content');if(!size_loaded){var my_width=0;var my_height=0;if(typeof(window.innerWidth)=='number'){my_width=window.innerWidth;my_height=window.innerHeight;}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){my_width=document.documentElement.clientWidth;my_height=document.documentElement.clientHeight;}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){my_width=document.body.clientWidth;my_height=document.body.clientHeight;}var divheight=parseInt(size_main.style.Height);var divwidth=parseInt(size_main.style.Width);divheight=divheight?divheight:400;divwidth=divwidth?divwidth:400;var divxy=my_getcookie('ipb-size-div');var co_ords;if(divxy&&divxy!=null){co_ords=divxy.split(',');if(co_ords.length){var final_width=co_ords[0];var final_height=co_ords[1];if(co_ords[0]>my_width){final_width=my_width-divwidth;}if(co_ords[1]>my_height){final_height=my_height-divheight;}size_main.style.left=final_width+'px';size_main.style.top=final_height+'px';}}else{size_main.style.left=my_width/2-(divwidth/2)+'px';size_main.style.top=my_height/2-(divheight/2)+'px';}Drag.cookiename='ipb-size-div';Drag.init(size_drag,size_main);size_loaded=1;}size_main.style.position='absolute';size_main.style.display='block';size_main.style.zIndex=99;if(is_ie){var html=size_content.innerHTML;html="<iframe id='size-shim' src='"+ipb_var_image_url+"/iframe.html' class='iframshim' scrolling='no' frameborder='0' style='position:absolute; top:0px; left:0px; right:0px; display: none;'></iframe>"+html;size_content.innerHTML=html;}if(is_ie){var drag_html=size_drag.innerHTML;var main_drag_html="<iframe id='size-shim-two' src='"+ipb_var_image_url+"/iframe.html' class='iframshim' scrolling='no' frameborder='0' style='position:absolute; top:0px; left:0px; right:0px; display: none;'></iframe>"+drag_html;size_drag.innerHTML=main_drag_html;}if(is_ie){size_shim=document.getElementById('size-shim');size_shim.style.width=size_content.offsetWidth;size_shim.style.height=size_content.offsetHeight;size_shim.style.zIndex=size_content.style.zIndex-1;size_shim.style.top=size_content.style.top;size_shim.style.left=size_content.style.left;size_shim.style.display="block";size_shim_d=document.getElementById('size-shim-two');size_shim_d.style.width=size_drag.offsetWidth;size_shim_d.style.height=size_drag.offsetHeight;size_shim_d.style.zIndex=size_drag.style.zIndex-1;size_shim_d.style.top=size_drag.style.top;size_shim_d.style.left=size_drag.style.left;size_shim_d.style.display="block";}return false;};function show_email_form(){var email_main=document.getElementById('email_form');var email_drag=document.getElementById('email-drag');var email_content=document.getElementById('email-content');if(!email_loaded){var my_width=0;var my_height=0;if(typeof(window.innerWidth)=='number'){my_width=window.innerWidth;my_height=window.innerHeight;}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){my_width=document.documentElement.clientWidth;my_height=document.documentElement.clientHeight;}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){my_width=document.body.clientWidth;my_height=document.body.clientHeight;}var divheight=parseInt(email_main.style.Height);var divwidth=parseInt(email_main.style.Width);divheight=divheight?divheight:400;divwidth=divwidth?divwidth:400;var divxy=my_getcookie('ipb-email-div');var co_ords;if(divxy&&divxy!=null){co_ords=divxy.split(',');if(co_ords.length){var final_width=co_ords[0];var final_height=co_ords[1];if(co_ords[0]>my_width){final_width=my_width-divwidth;}if(co_ords[1]>my_height){final_height=my_height-divheight;}email_main.style.left=final_width+'px';email_main.style.top=final_height+'px';}}else{email_main.style.left=my_width/2-(divwidth/2)+'px';email_main.style.top=my_height/2-(divheight/2)+'px';}Drag.cookiename='ipb-email-div';Drag.init(email_drag,email_main);email_loaded=1;}email_main.style.position='absolute';email_main.style.display='block';email_main.style.zIndex=99;if(is_ie){var html=email_content.innerHTML;html="<iframe id='email-shim' src='"+ipb_var_image_url+"/iframe.html' class='iframshim' scrolling='no' frameborder='0' style='position:absolute; top:0px; left:0px; right:0px; display: none;'></iframe>"+html;email_content.innerHTML=html;}if(is_ie){var drag_html=email_drag.innerHTML;var main_drag_html="<iframe id='email-shim-two' src='"+ipb_var_image_url+"/iframe.html' class='iframshim' scrolling='no' frameborder='0' style='position:absolute; top:0px; left:0px; right:0px; display: none;'></iframe>"+drag_html;email_drag.innerHTML=main_drag_html;}if(is_ie){email_shim=document.getElementById('emaile-shim');email_shim.style.width=email_content.offsetWidth;email_shim.style.height=email_content.offsetHeight;email_shim.style.zIndex=email_content.style.zIndex-1;email_shim.style.top=email_content.style.top;email_shim.style.left=email_content.style.left;email_shim.style.display="block";email_shim_d=document.getElementById('email-shim-two');email_shim_d.style.width=email_drag.offsetWidth;email_shim_d.style.height=email_drag.offsetHeight;email_shim_d.style.zIndex=email_drag.style.zIndex-1;email_shim_d.style.top=email_drag.style.top;email_shim_d.style.left=email_drag.style.left;email_shim_d.style.display="block";}return false;};function single_delete(url){formCheck=confirm(lang_suredelete);if(formCheck==true){window.location=url;}else{alert(lang_notdeleted);}};function update_vote_display(vote_num){document.getElementById('vote_num_display').innerHTML=vote_num;};function dl_add_rate(fid,vote){if(!use_enhanced_js){window.location=ipb_var_base_url+'autocom=downloads&req=ajax&code=addVote&id='+fid+'&vote='+vote;return false;}else{do_request_function=function(){if(!xmlobj.readystate_ready_and_ok()){return;}var returned=xmlobj.xmlhandler.responseText;var content=new Array();content=returned.split('|');document.getElementById('dl_cur_rate').innerHTML=content[1];document.getElementById('dl_vote').innerHTML=content[0];};xmlobj=new ajax_request();xmlobj.onreadystatechange(do_request_function);xmlobj.process(ipb_var_base_url+'autocom=downloads&req=ajax&code=addVote&xml=1&id='+fid+'&vote='+vote);}};var ajax_loaded=1;var post_cache=new Array();function ajax_std_window_resize(pix,pid){var box=document.getElementById('comment-edit-'+pid);var cur_height=parseInt(box.style.height)?parseInt(box.style.height):300;var new_height=cur_height+pix;if(new_height>0){box.style.height=new_height+"px";}return false;};function ajax_fulleditor_for_edit(post_id){if(post_id){var _form=document.getElementById('quick-edit-form-'+post_id);var _url=ipb_var_base_url+'autocom=downloads&req=comments&code=fulledit&cid='+post_id+'&_from=quickedit';_form.action=_url;_form.method='POST';_form.submit();xmlobj.show_loading();return false;}else{return false;}}function ajax_cancel_for_edit(com_id){if(post_cache[com_id]!=""){document.getElementById('comment-'+com_id).innerHTML=post_cache[com_id];}return false;};function ajax_save_for_edit(com_id){var url=ipb_var_base_url+'autocom=downloads&req=ajax&code=commentEditSave&cid='+com_id;var fields=new Array();fields['md5check']=ipb_md5_check;fields['cid']=com_id;fields['autocom']='downloads';fields['req']='ajax';fields['code']='commentEditSave';fields['Post']=document.getElementById(com_id+'_textarea').value;fields['std_used']=1;do_request_function=function(){if(!xmlobj.readystate_ready_and_ok()){xmlobj.show_loading();return;}xmlobj.hide_loading();var html=xmlobj.xmlhandler.responseText;if(html!='error'){document.getElementById('comment-'+com_id).innerHTML=html;}};xmlobj=new ajax_request();xmlobj.onreadystatechange(do_request_function);var xmlreturn=xmlobj.process(url,'POST',xmlobj.format_for_post(fields));post_cache[com_id]='';return false;};function ajax_prep_for_edit(com_id,event){ipsclass.cancel_bubble(event,true);var post_main_obj=document.getElementById('comment-main-'+com_id);var post_box_top=ipsclass.get_obj_toppos(post_main_obj);var url=ipb_var_base_url+'autocom=downloads&req=ajax&code=commentEdit&cid='+com_id;if(!post_cache[com_id]||post_cache[com_id]==''){post_cache[com_id]=document.getElementById('comment-'+com_id).innerHTML;}try{menu_action_close();}catch(e){}do_request_function=function(){if(!xmlobj.readystate_ready_and_ok()){xmlobj.show_loading();return;}xmlobj.hide_loading();var html=xmlobj.xmlhandler.responseText;if(html=='nopermission'){alert(js_error_no_permission);}else if(html!='error'){if(post_box_top){scroll(0,post_box_top-30);}document.getElementById('comment-'+com_id).innerHTML=html;IPS_Lite_Editor[com_id]=new ips_text_editor_lite(com_id);IPS_Lite_Editor[com_id].init();}};xmlobj=new ajax_request();xmlobj.onreadystatechange(do_request_function);xmlobj.process(url);return false;};function toggle_file(id,formname){saved=new Array();clean=new Array();add=1;var formid=document.getElementById(formname);tmp=formid.selectedfileids.value;saved=tmp.split(",");for(i=0;i<saved.length;i++){if(saved[i]!=""){if(saved[i]==id){add=0;}else{clean[clean.length]=saved[i];}}}if(add){clean[clean.length]=id;document.getElementById(formname+'-file'+id).src=selectedbutton;}else{document.getElementById(formname+'-file'+id).src=unselectedbutton;}newvalue=clean.join(',');my_setcookie('modfileids',newvalue,0);formid.selectedfileids.value=newvalue;newcount=stacksize(clean);formid.gobutton.value=ipsclass.html_entity_decode(lang_gobutton)+' ('+newcount+')';return false;};function toggle_select_all(formname){clean=new Array();saved=new Array();var topics_this_page=new Array();var formid=document.getElementById(formname);tmp=formid.selectedfileids.value;if(tmp!=""){saved=tmp.split(",");}if(_this_select_all==0){var the_topics=document.getElementsByTagName('input');for(var i=0;i<=the_topics.length;i++){var e=the_topics[i];if(e&&(e.type=='hidden')&&(!e.disabled)){var s=e.id;var pattern=new RegExp("^"+formname+"-file_(.+?)$");var a=s.replace(pattern,"$1");if(a){try{document.getElementById(formname+'-file'+a).src=selectedbutton;clean[clean.length]=a;topics_this_page[a]=1;}catch(err){}}}}document.getElementById('files-all-'+formname).src=selectedbutton;_this_select_all=1;}else{var the_topics=document.getElementsByTagName('input');for(var i=0;i<=the_topics.length;i++){var e=the_topics[i];if(e&&(e.type=='hidden')&&(!e.disabled)){var s=e.id;var pattern=new RegExp("^"+formname+"-file_(.+?)$");var a=s.replace(pattern,"$1");if(a){try{document.getElementById(formname+'-file'+a).src=unselectedbutton;topics_this_page[a]=1;}catch(err){}}}}document.getElementById('files-all-'+formname).src=unselectedbutton;_this_select_all=0;}for(i=0;i<saved.length;i++){if(saved[i]!=""&&topics_this_page[saved[i]]!=1){clean[clean.length]=saved[i];}}newvalue=clean.join(',');my_setcookie('modfileids',newvalue,0);formid.selectedfileids.value=newvalue;newcount=stacksize(clean);formid.gobutton.value=ipsclass.html_entity_decode(lang_gobutton)+' ('+newcount+')';return false;};var unselectedbutton=ipb_var_image_url+"/topic_unselected.gif";var selectedbutton=ipb_var_image_url+"/topic_selected.gif";var addquotebutton=ipb_var_image_url+"/p_mq_add.gif";var removequotebutton=ipb_var_image_url+"/p_mq_remove.gif";var lang_gobutton="With selected";var _this_select_all=0;function idm_link_to_post(pid,file){temp=prompt(idm_lang_prompt,ipb_var_base_url+"autocom=downloads&showfile="+file+"#comment"+pid);return false;};function multiquote_add(id){saved=new Array();clean=new Array();add=1;if(tmp=my_getcookie('idm_pids')){saved=tmp.split(",");}for(i=0;i<saved.length;i++){if(saved[i]!=""){if(saved[i]==id){add=0;}else{clean[clean.length]=saved[i];}}}if(add){clean[clean.length]=id;eval("document.mad_"+id+".src=removequotebutton");}else{eval(" document.mad_"+id+".src=addquotebutton");}my_setcookie('idm_pids',clean.join(','),0);return false;};var idm_ignore_cache=new Array();function show_ignored_post(pid){try{var post_main=document.getElementById('comment-main-'+pid);var post_ignore=document.getElementById('comment-ignore-'+pid);post_main.innerHTML=idm_ignore_cache[pid];}catch(e){}return false;};function init_ignored_post(pid){try{var post_main=document.getElementById('comment-main-'+pid);var post_ignore=document.getElementById('comment-ignore-'+pid);idm_ignore_cache[pid]=post_main.innerHTML;post_main.innerHTML=post_ignore.innerHTML;}catch(e){}};function idm_toggle_pid(id){saved=new Array();clean=new Array();add=1;tmp=document.modform.selectedpids.value;saved=tmp.split(",");for(i=0;i<saved.length;i++){if(saved[i]!=""){if(saved[i]==id){add=0;}else{clean[clean.length]=saved[i];}}}if(add){clean[clean.length]=id;eval("document.pid"+id+".src=selectedbutton");}else{eval(" document.pid"+id+".src=unselectedbutton");}newvalue=clean.join(',');my_setcookie('idmmodpids',newvalue,0);document.modform.selectedpids.value=newvalue;newcount=stacksize(clean);document.modform.gobutton.value=lang_gobutton+'('+newcount+')';return false;};function file_rate(){this.settings={'allow_rating':0,'default_rating':3,'img_star_on':'star_filled.gif','img_star_selected':'star_selected.gif','img_star_off':'star_empty.gif','img_main_star_0':'rating_0.gif','img_main_star_1':'rating_1.gif','img_main_star_2':'rating_2.gif','img_main_star_3':'rating_3.gif','img_main_star_4':'rating_4.gif','img_main_star_5':'rating_5.gif','img_base_url':'','file_id':0,'div_rating_wrapper':'file-rating-wrapper','text_rating_image':'file-rating-img-','file-rating-img-main':'file-rating-img-main','file-rating-my-rating':'file-rating-my-rating','file-rating-hits':'file-rating-hits'};this.languages={'img_alt_rate':'','rate_me':''};this.init_rating_images=function(){var html='';for(var i=1;i<=5;i++){var _onmouseover='';var _onmouseout='';var _onclick='';var _title='';if(this.settings['allow_rating']){_onmouseover=' onmouseover="this.style.cursor=\'pointer\'; file_rate.show_rating_images('+i+', 0)"';_onmouseout=' onmouseout="file_rate.show_rating_images(-1, 1)"';_onclick=' onclick="file_rate.send_rating('+i+')"';_title=this.languages['img_alt_rate'];}html+="<img style='vertical-align:top' src='"+this.settings['img_base_url']+'/'+this.settings['img_star_off']+"' "+_onmouseover+_onmouseout+_onclick+"id='"+this.settings['text_rating_image']+i+"' alt='-' title='"+_title+"' />";}document.getElementById(this.settings['div_rating_wrapper']).innerHTML=this.languages['rate_me']+' '+html;this.show_rating_images(this.settings['default_rating'],1);};this.send_rating=function(rating){rating=rating?rating:0;if(rating){var url=ipb_var_base_url+'autocom=downloads&req=ajax&xml=1&code=addVote&id='+this.settings['file_id']+'&vote='+rating;do_request_function=function(){if(!xmlobj.readystate_ready_and_ok()){xmlobj.show_loading('');return;}xmlobj.hide_loading();var html=xmlobj.xmlhandler.responseText;if(html=='no_permission'){alert(js_error_no_permission);}else if(html!='error'){var _result=html.split(',');var _new_value=_result[0];var _new_hits=_result[1];var _new_stars=_result[2];var _type=_result[3];file_rate.settings['default_rating']=parseInt(_new_stars);file_rate.settings['allow_rating']=0;file_rate.show_rating_images(file_rate.settings['default_rating'],1);file_rate.init_rating_images();menu_action_close();document.getElementById('file-rating-hits').innerHTML=_new_hits;document.getElementById('file-rating-my-rating').innerHTML=rating;show_inline_messages_instant('rating_updated');}};xmlobj=new ajax_request();xmlobj.onreadystatechange(do_request_function);xmlobj.process(url);return false;}};this.show_rating_images=function(rating,restore_default){rating=restore_default?this.settings['default_rating']:parseInt(rating);var star=restore_default?this.settings['img_star_on']:this.settings['img_star_selected'];for(var i=1;i<=5;i++){var _img=document.getElementById(this.settings['text_rating_image']+i);_img.src=this.settings['img_base_url']+'/'+this.settings['img_star_off'];}for(var i=1;i<=rating;i++){var _img=document.getElementById(this.settings['text_rating_image']+i);_img.src=this.settings['img_base_url']+'/'+star;}document.getElementById(this.settings['file-rating-img-main']).src=this.settings['img_base_url']+'/'+this.settings['img_main_star_'+rating];};};
